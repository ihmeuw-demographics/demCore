<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to life tables • demCore</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to life tables">
<meta property="og:description" content="demCore">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">demCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ccmpp.html">Cohort Component Method of Population Projection (CCMPP)</a>
    </li>
    <li>
      <a href="../articles/introduction_to_life_tables.html">Introduction to life tables</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ihmeuw-demographics/demCore/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="introduction_to_life_tables_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to life tables</h1>
                        <h4 class="author">Katie Paulson</h4>
            
            <h4 class="date">March 2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ihmeuw-demographics/demCore/blob/master/vignettes/introduction_to_life_tables.Rmd"><code>vignettes/introduction_to_life_tables.Rmd</code></a></small>
      <div class="hidden name"><code>introduction_to_life_tables.Rmd</code></div>

    </div>

    
    
<div id="what-is-a-life-table" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-a-life-table" class="anchor"></a>What is a life table?</h2>
<p>A <strong>life table</strong> is a table that includes information to describe the dying out of a birth cohort. This can also be a synthetic birth cohort, in which case we refer to it as a <strong>period life table</strong>.</p>
<p>Life tables are one of the most important devices in demography – they have been used since the 1600s! They can also be useful for other fields, because they are generalizable to other discrete “time to event” data.</p>
<p>Typically, life tables have one row per age group, with columns representing life table <strong>metrics</strong>, also known as <strong>parameters</strong>. The life table parameters used in this package are <span class="math inline">\(_nm_x\)</span>, <span class="math inline">\(_na_x\)</span>, <span class="math inline">\(_nq_x\)</span>, <span class="math inline">\(_np_x\)</span>, <span class="math inline">\(l_x\)</span>, <span class="math inline">\(_nd_x\)</span>, <span class="math inline">\(e_x\)</span>, <span class="math inline">\(_nL_x\)</span>, and <span class="math inline">\(T_x\)</span>. In this notation, <span class="math inline">\(x\)</span> refers to age, and the metrics apply to either the age <span class="math inline">\(x\)</span> directly or to the interval between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span> where <span class="math inline">\(n\)</span> indicates the length of the interval, typically in years. We often shorthand by removing the “n” from the notation, with interval length implied.</p>
<p>Here’s an example of a period life table, for males in Austria in 1992, which is saved in the package as <code>austria_1992_lt</code> (source: Preston 2001):</p>
<table class="table">
<thead><tr class="header">
<th align="right">x</th>
<th align="right">x+n</th>
<th align="right">deaths</th>
<th align="right">pop</th>
<th align="right">mx</th>
<th align="right">ax</th>
<th align="right">qx</th>
<th align="right">px</th>
<th align="right">lx</th>
<th align="right">dx</th>
<th align="right">nLx</th>
<th align="right">Tx</th>
<th align="right">ex</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">1</td>
<td align="right">419</td>
<td align="right">47925</td>
<td align="right">0.01</td>
<td align="right">0.07</td>
<td align="right">0.01</td>
<td align="right">0.99</td>
<td align="right">1.00</td>
<td align="right">0.01</td>
<td align="right">0.99</td>
<td align="right">72.89</td>
<td align="right">72.89</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">5</td>
<td align="right">70</td>
<td align="right">189127</td>
<td align="right">0.00</td>
<td align="right">1.63</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">0.99</td>
<td align="right">0.00</td>
<td align="right">3.96</td>
<td align="right">71.90</td>
<td align="right">72.53</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">10</td>
<td align="right">36</td>
<td align="right">234793</td>
<td align="right">0.00</td>
<td align="right">2.50</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">0.99</td>
<td align="right">0.00</td>
<td align="right">4.95</td>
<td align="right">67.94</td>
<td align="right">68.63</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">15</td>
<td align="right">46</td>
<td align="right">238790</td>
<td align="right">0.00</td>
<td align="right">3.14</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">0.99</td>
<td align="right">0.00</td>
<td align="right">4.94</td>
<td align="right">62.99</td>
<td align="right">63.68</td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="right">20</td>
<td align="right">249</td>
<td align="right">254996</td>
<td align="right">0.00</td>
<td align="right">2.72</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">0.99</td>
<td align="right">0.00</td>
<td align="right">4.93</td>
<td align="right">58.04</td>
<td align="right">58.74</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">25</td>
<td align="right">420</td>
<td align="right">326831</td>
<td align="right">0.00</td>
<td align="right">2.52</td>
<td align="right">0.01</td>
<td align="right">0.99</td>
<td align="right">0.98</td>
<td align="right">0.01</td>
<td align="right">4.90</td>
<td align="right">53.11</td>
<td align="right">54.01</td>
</tr>
<tr class="odd">
<td align="right">25</td>
<td align="right">30</td>
<td align="right">403</td>
<td align="right">355086</td>
<td align="right">0.00</td>
<td align="right">2.48</td>
<td align="right">0.01</td>
<td align="right">0.99</td>
<td align="right">0.98</td>
<td align="right">0.01</td>
<td align="right">4.87</td>
<td align="right">48.21</td>
<td align="right">49.35</td>
</tr>
<tr class="even">
<td align="right">30</td>
<td align="right">35</td>
<td align="right">441</td>
<td align="right">324222</td>
<td align="right">0.00</td>
<td align="right">2.60</td>
<td align="right">0.01</td>
<td align="right">0.99</td>
<td align="right">0.97</td>
<td align="right">0.01</td>
<td align="right">4.84</td>
<td align="right">43.34</td>
<td align="right">44.61</td>
</tr>
<tr class="odd">
<td align="right">35</td>
<td align="right">40</td>
<td align="right">508</td>
<td align="right">269963</td>
<td align="right">0.00</td>
<td align="right">2.70</td>
<td align="right">0.01</td>
<td align="right">0.99</td>
<td align="right">0.96</td>
<td align="right">0.01</td>
<td align="right">4.80</td>
<td align="right">38.50</td>
<td align="right">39.90</td>
</tr>
<tr class="even">
<td align="right">40</td>
<td align="right">45</td>
<td align="right">769</td>
<td align="right">261971</td>
<td align="right">0.00</td>
<td align="right">2.66</td>
<td align="right">0.01</td>
<td align="right">0.99</td>
<td align="right">0.96</td>
<td align="right">0.01</td>
<td align="right">4.75</td>
<td align="right">33.70</td>
<td align="right">35.25</td>
</tr>
<tr class="odd">
<td align="right">45</td>
<td align="right">50</td>
<td align="right">1154</td>
<td align="right">238011</td>
<td align="right">0.00</td>
<td align="right">2.70</td>
<td align="right">0.02</td>
<td align="right">0.98</td>
<td align="right">0.94</td>
<td align="right">0.02</td>
<td align="right">4.66</td>
<td align="right">28.95</td>
<td align="right">30.73</td>
</tr>
<tr class="even">
<td align="right">50</td>
<td align="right">55</td>
<td align="right">1866</td>
<td align="right">261612</td>
<td align="right">0.01</td>
<td align="right">2.68</td>
<td align="right">0.04</td>
<td align="right">0.96</td>
<td align="right">0.92</td>
<td align="right">0.03</td>
<td align="right">4.52</td>
<td align="right">24.29</td>
<td align="right">26.42</td>
</tr>
<tr class="odd">
<td align="right">55</td>
<td align="right">60</td>
<td align="right">2043</td>
<td align="right">181385</td>
<td align="right">0.01</td>
<td align="right">2.64</td>
<td align="right">0.05</td>
<td align="right">0.95</td>
<td align="right">0.89</td>
<td align="right">0.05</td>
<td align="right">4.32</td>
<td align="right">19.77</td>
<td align="right">22.29</td>
</tr>
<tr class="even">
<td align="right">60</td>
<td align="right">65</td>
<td align="right">3496</td>
<td align="right">187962</td>
<td align="right">0.02</td>
<td align="right">2.62</td>
<td align="right">0.09</td>
<td align="right">0.91</td>
<td align="right">0.84</td>
<td align="right">0.07</td>
<td align="right">4.01</td>
<td align="right">15.45</td>
<td align="right">18.43</td>
</tr>
<tr class="odd">
<td align="right">65</td>
<td align="right">70</td>
<td align="right">4366</td>
<td align="right">153832</td>
<td align="right">0.03</td>
<td align="right">2.62</td>
<td align="right">0.13</td>
<td align="right">0.87</td>
<td align="right">0.76</td>
<td align="right">0.10</td>
<td align="right">3.58</td>
<td align="right">11.43</td>
<td align="right">14.97</td>
</tr>
<tr class="even">
<td align="right">70</td>
<td align="right">75</td>
<td align="right">4337</td>
<td align="right">105169</td>
<td align="right">0.04</td>
<td align="right">2.59</td>
<td align="right">0.19</td>
<td align="right">0.81</td>
<td align="right">0.66</td>
<td align="right">0.12</td>
<td align="right">3.01</td>
<td align="right">7.86</td>
<td align="right">11.86</td>
</tr>
<tr class="odd">
<td align="right">75</td>
<td align="right">80</td>
<td align="right">5279</td>
<td align="right">73694</td>
<td align="right">0.07</td>
<td align="right">2.52</td>
<td align="right">0.30</td>
<td align="right">0.70</td>
<td align="right">0.54</td>
<td align="right">0.16</td>
<td align="right">2.28</td>
<td align="right">4.84</td>
<td align="right">9.00</td>
</tr>
<tr class="even">
<td align="right">80</td>
<td align="right">85</td>
<td align="right">6460</td>
<td align="right">57512</td>
<td align="right">0.11</td>
<td align="right">2.42</td>
<td align="right">0.44</td>
<td align="right">0.56</td>
<td align="right">0.37</td>
<td align="right">0.16</td>
<td align="right">1.45</td>
<td align="right">2.56</td>
<td align="right">6.84</td>
</tr>
<tr class="odd">
<td align="right">85</td>
<td align="right">Inf</td>
<td align="right">6146</td>
<td align="right">32248</td>
<td align="right">0.19</td>
<td align="right">5.25</td>
<td align="right">1.00</td>
<td align="right">0.00</td>
<td align="right">0.21</td>
<td align="right">0.21</td>
<td align="right">1.11</td>
<td align="right">1.11</td>
<td align="right">5.25</td>
</tr>
</tbody>
</table>
</div>
<div id="life-table-metrics" class="section level2">
<h2 class="hasAnchor">
<a href="#life-table-metrics" class="anchor"></a>Life table metrics</h2>
<p>For reference, the following is a list of life table metrics and their definitions.</p>
<p><strong><span class="math inline">\(\mathbf{_nm_x}\)</span>:</strong> mortality rate between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span>. Shorthand to <span class="math inline">\(m_x\)</span> with implied interval width (<span class="math inline">\(n\)</span>). Equals deaths divided by person-years lived in the interval. Mid-year population is commonly used as an adequate approximation of the person-years denominator.</p>
<p><strong><span class="math inline">\(\mathbf{_na_x}\)</span>:</strong> mean person-years lived between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span> for those who die within the interval. Shorthand to <span class="math inline">\(a_x\)</span> with implied interval width (<span class="math inline">\(n\)</span>).</p>
<p><strong><span class="math inline">\(\mathbf{_nq_x}\)</span>:</strong> probability of death between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span>, conditional on survival to age <span class="math inline">\(x\)</span>. Shorthand to <span class="math inline">\(q_x\)</span> with implied interval width (<span class="math inline">\(n\)</span>). Equals deaths in the interval divided by survivors to <span class="math inline">\(x\)</span>-th birthday. Examples: <span class="math inline">\(_5q_0\)</span> = probability of death between birth and age <span class="math inline">\(5\)</span>; <span class="math inline">\(_{45}q_{15}\)</span> = probability of death between age <span class="math inline">\(15\)</span> and age <span class="math inline">\(60\)</span> conditional on survival to age <span class="math inline">\(15\)</span>.</p>
<p><strong><span class="math inline">\(\mathbf{l_x}\)</span>:</strong> proportion of the cohort surviving to age <span class="math inline">\(x\)</span>.</p>
<p><strong><span class="math inline">\(\mathbf{e_x}\)</span>:</strong> life expectancy at age <span class="math inline">\(x\)</span> – mean number of years lived after <span class="math inline">\(x\)</span>-th birthday by those surviving to age <span class="math inline">\(x\)</span>. Life expectancy at birth is <span class="math inline">\(e_0\)</span>.</p>
<p><strong><span class="math inline">\(\mathbf{_nL_x}\)</span>:</strong> total person-years lived between age <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span>.</p>
<p><strong><span class="math inline">\(\mathbf{T_x}\)</span>:</strong> total person-years lived above age <span class="math inline">\(x\)</span>.</p>
<p><strong><span class="math inline">\(\mathbf{_nd_x}\)</span>:</strong> proportion of the cohort dying between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span>. Shorthand to <span class="math inline">\(d_x\)</span>.</p>
<p><strong><span class="math inline">\(\mathbf{_np_x}\)</span>:</strong> probability of survival between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span> conditional on survival to age <span class="math inline">\(x\)</span>. Inverse of <span class="math inline">\(qx\)</span>.</p>
</div>
<div id="representing-life-tables-graphically" class="section level2">
<h2 class="hasAnchor">
<a href="#representing-life-tables-graphically" class="anchor"></a>Representing life tables graphically</h2>
<p>We often reduce life tables to age patterns of log probability of death (<span class="math inline">\(\text{log}(q_x)\)</span>) or to survival curves (<span class="math inline">\(l_x\)</span> over age), which can be easily displayed and vetted in plots.</p>
<p><img src="introduction_to_life_tables_files/figure-html/plot_qx-1.png" width="700"><img src="introduction_to_life_tables_files/figure-html/plot_qx-2.png" width="700"></p>
</div>
<div id="calculations-and-relationships-between-life-table-metrics" class="section level2">
<h2 class="hasAnchor">
<a href="#calculations-and-relationships-between-life-table-metrics" class="anchor"></a>Calculations and relationships between life table metrics</h2>
<p>The <code>demCore</code> package includes many utility functions for calculations that leverage the mathematical relationships between life table metrics to build out a complete life table. This section will provide details and examples regarding the use of these functions and their underlying methods. We will accomplish this by following along the example of building the example life table above from death counts and population.</p>
<p>Note that this document and this package do not contain an exhaustive list of relationships between metrics. Additionally, some equations presented rely on assumptions and others are true relationships that are always valid. For more details, see the Preston Demography textbook, from which many of these details were drawn.</p>
<div id="mx" class="section level3">
<h3 class="hasAnchor">
<a href="#mx" class="anchor"></a>mx</h3>
<p>From raw death count and population data, the place to start with a life table is <span class="math inline">\(m_x\)</span>.</p>
<p><span class="math display">\[m_x = \frac{\text{deaths}}{\text{person-years}} \approx
\frac{\text{observed deaths}}{\text{mid-interval population}}\]</span></p>
<p>Let’s load in our example data and calculate <span class="math inline">\(m_x\)</span>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"austria_1992_lt"</span><span class="op">)</span>
<span class="va">dt</span> <span class="op">&lt;-</span> <span class="va">austria_1992_lt</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_start"</span>, <span class="st">"age_end"</span>, <span class="st">"deaths"</span>, <span class="st">"pop"</span><span class="op">)</span><span class="op">]</span>
<span class="va">dt</span><span class="op">[</span>, <span class="va">mx</span> <span class="op">:=</span> <span class="va">deaths</span> <span class="op">/</span> <span class="va">pop</span><span class="op">]</span></pre></div>
</div>
<div id="ax" class="section level3">
<h3 class="hasAnchor">
<a href="#ax" class="anchor"></a>ax</h3>
<p>If we have <span class="math inline">\(m_x\)</span> and <span class="math inline">\(q_x\)</span> we can directly calculate <span class="math inline">\(a_x\)</span>. However, we often use <span class="math inline">\(m_x\)</span> and <span class="math inline">\(a_x\)</span> to get <span class="math inline">\(q_x\)</span> in the first place, and so have to make some assumptions to get <span class="math inline">\(a_x\)</span>. Empirical calculations of <span class="math inline">\(a_x\)</span> would require detailed and accurate data on age of death in days (such as paired date of birth and date of death), which is typically unavailable.</p>
<p><strong>Rule of thumb:</strong></p>
<p>One option is to assume all deaths occur in the middle of the interval, so <span class="math inline">\(a_x \approx n/2\)</span>. This assumption works well for most ages, but it doesn’t work as well for very young or very old where mortality can change rapidly over the interval.</p>
<p>Another assumption we can make is that the age-specific death rate is constant between <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span>. Under this assumption, <span class="math display">\[_na_x = n + \frac{1}{_nm_x} - \frac{n}{1- e^{-n  \cdot {_nm_x}}}.\]</span> The function <code>mx_to_ax</code> implements this assumption.</p>
<p>Using our example data, we get:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu">hierarchyUtils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/hierarchyUtils/man/gen_interval_cols.html">gen_length</a></span><span class="op">(</span><span class="va">dt</span>, col_stem <span class="op">=</span> <span class="st">"age"</span><span class="op">)</span>
<span class="va">dt</span><span class="op">[</span>, <span class="va">ax</span> <span class="op">:=</span> <span class="fu"><a href="../reference/mx_qx_ax_conversions.html">mx_to_ax</a></span><span class="op">(</span>mx <span class="op">=</span> <span class="va">mx</span>, age_length <span class="op">=</span> <span class="va">age_length</span><span class="op">)</span><span class="op">]</span></pre></div>
<p>Note that we can use <code><a href="https://rdrr.io/pkg/hierarchyUtils/man/gen_interval_cols.html">hierarchyUtils::gen_length</a></code> to add the <code>age_length</code> column given <code>age_start</code> and <code>age_end</code>.</p>
<p><strong>1a0 and 4a1:</strong></p>
<p>Preston et al adapted an analysis first completed by Coale and Demeny (1983) to derive a relationship between infant mortality rate (<span class="math inline">\(_1m_0\)</span>) and under-5 <span class="math inline">\(a_x\)</span> values (<span class="math inline">\(_1a_0\)</span> and <span class="math inline">\(_4a_1\)</span>). In the absence of reliable data to produce <span class="math inline">\(a_x\)</span>, these relationships can be used to predict <span class="math inline">\(a_x\)</span> from infant <span class="math inline">\(m_x\)</span>:</p>
<table class="table">
<thead><tr class="header">
<th></th>
<th>Males</th>
<th>Females</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1a0:</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>If 1m0 &gt;= 0.107</td>
<td>0.330</td>
<td>0.350</td>
</tr>
<tr class="odd">
<td>If 1m0 &lt; 0.107</td>
<td>0.045 + 2.684 * 1m0</td>
<td>0.053 + 2.800 * 1m0</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>4a1:</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>If 1m0 &gt;= 0.107</td>
<td>1.352</td>
<td>1.361</td>
</tr>
<tr class="odd">
<td>If 1m0 &lt; 0.107</td>
<td>1.651 - 2.816 * 1m0</td>
<td>1.522 - 1.518 * 1m0</td>
</tr>
</tbody>
</table>
<p>Use the <code>gen_u5_ax</code> function to implement this method:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">dt</span><span class="op">[</span>, <span class="va">sex</span> <span class="op">:=</span> <span class="st">"male"</span><span class="op">]</span>
<span class="fu"><a href="../reference/gen_u5_ax.html">gen_u5_ax</a></span><span class="op">(</span><span class="va">dt</span>, id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_start"</span>, <span class="st">"age_end"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span></pre></div>
<p><strong>Graduation method:</strong> One strategy for selecting <span class="math inline">\(a_x\)</span> values is based on the level and slope of the <span class="math inline">\(_nm_x\)</span> function. Comparing two populations with the same <span class="math inline">\(_5m_60\)</span>, the population with more rapidly rising mortality rate with respect to age will have deaths that are more concentrated in the later part of the interval (higher <span class="math inline">\(a_x\)</span>). Comparing two populations with the same slope in <span class="math inline">\(m_x\)</span>, the one with higher mortality rate will have more deaths at the beginning of the interval (lower <span class="math inline">\(a_x\)</span>).</p>
<p>To utilize this theory, we can implement iteration as described in the Preston book, and originally proposed by Keyfitz (1966): <span class="math display">\[_na_x = \frac{\frac{-n}{24} {_nd_{x-n}} + \frac{n}{2} {_nd_x} +
\frac{n}{24} {_nd_{x+n}}}{_nd_x}\]</span> Where <span class="math inline">\(d_x\)</span> is derived from the conversion from <span class="math inline">\(m_x\)</span> to <span class="math inline">\(q_x\)</span>. However, since the <span class="math inline">\(m_x\)</span> to <span class="math inline">\(q_x\)</span> conversion requires <span class="math inline">\(a_x\)</span>, this requires us to pick a starting place for <span class="math inline">\(a_x\)</span> (like <span class="math inline">\(n/2\)</span>), solve for <span class="math inline">\(d_x\)</span>, solve for <span class="math inline">\(a_x\)</span>, and so on until convergence. Use <code><a href="../reference/iterate_ax.html">demCore::iterate_ax</a></code> to implement this method.</p>
</div>
<div id="qx" class="section level3">
<h3 class="hasAnchor">
<a href="#qx" class="anchor"></a>qx</h3>
<p>From <span class="math inline">\(m_x\)</span> and <span class="math inline">\(a_x\)</span>, we can solve directly for <span class="math inline">\(q_x\)</span>:</p>
<p><span class="math display">\[_nq_x = \frac{n \cdot {_nm_x}}{1 + (n - {_na_x}) \cdot {_nm_x}}\]</span> For the terminal age group, <span class="math inline">\(q_x\)</span> should be <span class="math inline">\(1\)</span> because all individuals surviving to the terminal age group will die in that age group (probability of death = <span class="math inline">\(1\)</span>).</p>
<p>The <code>mx_ax_to_qx</code> combines the equation for <span class="math inline">\(q_x\)</span> and the requirement that terminal <span class="math inline">\(q_x\)</span> equal one by setting <span class="math inline">\(q_x = 1\)</span> if <code>age_length = Inf</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">dt</span><span class="op">[</span>, <span class="va">qx</span> <span class="op">:=</span> <span class="fu"><a href="../reference/mx_qx_ax_conversions.html">mx_ax_to_qx</a></span><span class="op">(</span>mx <span class="op">=</span> <span class="va">mx</span>, ax <span class="op">=</span> <span class="va">ax</span>, age_length <span class="op">=</span> <span class="va">age_length</span><span class="op">)</span><span class="op">]</span></pre></div>
<p>Other functions that utilize this relationship but solve for different metrics are <code>mx_qx_to_ax</code> and <code>qx_ax_to_mx</code>.</p>
<p>You can also solve for <span class="math inline">\(q_x\)</span> under the assumption of constant mortality rate within an interval, which removes <span class="math inline">\(a_x\)</span> from the relationship:</p>
<p><span class="math display">\[_nq_x = 1 - e^{-n \cdot {_nm_x}}.\]</span></p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">dt</span><span class="op">[</span>, <span class="va">qx_compare</span> <span class="op">:=</span> <span class="fu"><a href="../reference/mx_qx_ax_conversions.html">mx_to_qx</a></span><span class="op">(</span>mx <span class="op">=</span> <span class="va">mx</span>, age_length <span class="op">=</span> <span class="va">age_length</span><span class="op">)</span><span class="op">]</span></pre></div>
<p>These two <span class="math inline">\(q_x\)</span> values are the same, because the implied <span class="math inline">\(a_x\)</span> in <code>mx_to_qx</code> is equivalent to the <span class="math inline">\(a_x\)</span> we generate under the assumption in <code>mx_to_ax</code>.</p>
</div>
<div id="lx" class="section level3">
<h3 class="hasAnchor">
<a href="#lx" class="anchor"></a>lx</h3>
<p>To calculate the proportion of a cohort surviving to age <span class="math inline">\(x\)</span> (<span class="math inline">\(l_x\)</span>), we set <span class="math inline">\(l_0 = 1\)</span> (100% survive to birth), and recursively calculate:</p>
<p><span class="math display">\[l_{x+n} = l_x \cdot (1 - _nq_x)\]</span></p>
<p>or in words, the proportion surviving to age <span class="math inline">\(x\)</span> times the proportion of those survivors who do not die between <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span> is the proportion surviving to age <span class="math inline">\(x+n\)</span>.</p>
<p>Our <code>gen_lx_from_qx</code> function can perform this calculation:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="../reference/gen_lifetable_parameters.html">gen_lx_from_qx</a></span><span class="op">(</span><span class="va">dt</span>, id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_start"</span>, <span class="st">"age_end"</span><span class="op">)</span><span class="op">)</span></pre></div>
</div>
<div id="dx" class="section level3">
<h3 class="hasAnchor">
<a href="#dx" class="anchor"></a>dx</h3>
<p>Proportion of cohort dying between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span> (<span class="math inline">\(d_x\)</span>) is <span class="math inline">\(_nq_0\)</span> to start, then <span class="math inline">\(_nd_x = l_x - l_{x+n}\)</span> thereafter (difference between proportion surviving to age <span class="math inline">\(x\)</span> and proportion surviving to age <span class="math inline">\(x+n\)</span>).</p>
<p>To calculate <span class="math inline">\(d_x\)</span>, use <code>gen_dx_from_lx</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="fu"><a href="../reference/gen_lifetable_parameters.html">gen_dx_from_lx</a></span><span class="op">(</span><span class="va">dt</span>, id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_start"</span>, <span class="st">"age_end"</span><span class="op">)</span><span class="op">)</span></pre></div>
</div>
<div id="nlx" class="section level3">
<h3 class="hasAnchor">
<a href="#nlx" class="anchor"></a>nLx</h3>
<p>The person-years lived between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span> (<span class="math inline">\(_nL_x\)</span>) can be broken down into:</p>
<ul>
<li>Person-years lived by those who <em>survive</em> the interval = <span class="math inline">\(n \cdot l_{x+n}\)</span>
</li>
<li>Person-years lived by those who <em>die</em> during the interval = <span class="math inline">\(_na_x \cdot {_nd_x}\)</span>
</li>
</ul>
<p>such that:</p>
<p><span class="math display">\[_nL_x = n \cdot l_{x+n} + _na_x \cdot {_nd_x}.\]</span></p>
<p>For the <em>terminal age group</em>:</p>
<p><span class="math display">\[{_{\infty}L_x} = \text{person-years lived above age } x =
\frac{\text{person-years lived above age }x}{\text{deaths over age }x}
\cdot \text{deaths over age }x= \frac{l_x}{_{\infty}m_x}\]</span></p>
<p>Use the <code>gen_nLx</code> function to calculate with this method:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/gen_lifetable_parameters.html">gen_nLx</a></span><span class="op">(</span><span class="va">dt</span>, id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_start"</span>, <span class="st">"age_end"</span><span class="op">)</span><span class="op">)</span></pre></div>
</div>
<div id="tx" class="section level3">
<h3 class="hasAnchor">
<a href="#tx" class="anchor"></a>Tx</h3>
<p>Next, use <span class="math inline">\(_nL_x\)</span> to get <span class="math inline">\(T_x\)</span>:</p>
<p><span class="math display">\[T_x = \sum_{x}^{\infty} {_nL_x}.\]</span></p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="../reference/gen_lifetable_parameters.html">gen_Tx</a></span><span class="op">(</span><span class="va">dt</span>, id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age_start"</span>, <span class="st">"age_end"</span><span class="op">)</span><span class="op">)</span></pre></div>
</div>
<div id="ex" class="section level3">
<h3 class="hasAnchor">
<a href="#ex" class="anchor"></a>ex</h3>
<p>Life expectancy above age <span class="math inline">\(x\)</span> (mean person-years lived above age <span class="math inline">\(x\)</span>) is equal to the total person years over age <span class="math inline">\(x\)</span> divided by the persons surviving to age <span class="math inline">\(x\)</span>:</p>
<p><span class="math display">\[e_x = \frac{T_x}{lx}.\]</span></p>
<p>For the terminal age group, <span class="math inline">\(a_x = e_x\)</span> because everyone surviving to the interval dies in the interval.</p>
<p>Calculate <span class="math inline">\(e_x\)</span> with <code>gen_ex</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="../reference/gen_lifetable_parameters.html">gen_ex</a></span><span class="op">(</span><span class="va">dt</span><span class="op">)</span></pre></div>
</div>
<div id="summary" class="section level3">
<h3 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h3>
<p>One possible set of steps for calculating a complete period life table from deaths and mid-year population is:</p>
<ol style="list-style-type: decimal">
<li>Compute mx = deaths / population</li>
<li>Estimate &lt;5 ax from mx using <code>gen_u5_ax</code>, and set ax over age 5 as n/2</li>
<li>Calculate qx directly using <code>mx_ax_to_qx</code>
</li>
<li>Use ax iteration with <code>iterate_ax</code> to modify ax and qx values, improving ax over the naive n/2 values</li>
<li>Calculate px, lx, dx, nLx, Tx, and ex directly, in that order, from mx, ax, and qx, with <code>lifetable</code> function. The <code>lifetable</code> function combines many of the functions described in this vignette for convenience.</li>
<li>In the terminal age group, ax is equal to ex. So, once ex is solved for, terminal ax can be replaced with that value.</li>
</ol>
</div>
<div id="references" class="section level3">
<h3 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h3>
<p>Preston Samuel H, Patrick H, Michel G. Demography: measuring and modeling population processes. MA: Blackwell Publishing. 2001.</p>
<p>Coale AJ, Demeny P, Vaughan B. Regional model life tables and stable populations: studies in population. Elsevier; 2013 Oct 22.</p>
<p>Keyfitz N. A life table that agrees with the data. Journal of the American Statistical Association. 1966 Jun 1;61(314):305-12.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Katie Paulson, Grant Nguyen, Charlton Callender, Spencer Pease, Haidong Wang, Institute for Health Metrics and Evaluation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
